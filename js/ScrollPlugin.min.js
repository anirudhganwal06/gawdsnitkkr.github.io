(function(a){a.fn.ScrollPlugin=function(F,I,r){var P=[],t=[],e=[],b=this.length,Q=this,l=a("#"+F),y=a.extend({FunctionsIn:[],FunctionsOut:[],SideMenu:true,SideMenuResponeArea:20,SideMenuClass:"ScrollPluginMenu",SideMenuButtonClass:"ScrollPluginMenuButton",SideMenuButtonIcons:[],ScrollCallBack:undefined,SideMenuOpenCallBack:undefined,SideMenuCloseCallBack:undefined,Easing:Power4.easeOut,Duration:1,ResizeSection:true},I),z=y.FunctionsIn,S=y.FunctionsOut,C=y.SideMenu,h=y.SideMenuResponeArea,H=y.SideMenuClass,u=y.SideMenuButtonClass,d=y.SideMenuButtonIcons,v,m,N=[],B=[],p,K,L=false,J,w=y.ScrollCallBack,k=y.SideMenuOpenCallBack,R=y.SideMenuCloseCallBack,f=y.Easing,T=y.Duration,c=T/2,j=y.ResizeSection,x=r||a(window),n=x[0],O=n.innerWidth,E=n.innerHeight,A=E/2,q=false,g=false,s=1,D=0,M=0;for(;M<b;M++){P.push(a(Q[M]));t.push(P[M].position().top);P[M].css({position:"relative",display:"block",padding:0,margin:0});P[M].find(".Heading object").attr("section",M).on("load",function(){var i=parseInt(a(this).attr("section"));e[i]=a(this.contentDocument.documentElement).drawsvg({duration:7000,ease:"swing"})});z[M]=z[M]||"";S[M]=S[M]||"";d[M]=d[M]||""}v=parseInt(P[0].width()*0.05-20);m=v/2;J=m*b;var G={PerformScroll:function(i){i=i||false;var V=s-1,o=z[V];G.HighlightCurrentSideMenuIcon();if((w!==undefined)&&!L){w()}if(e[V]!==undefined){e[V].drawsvg("animate")}TweenMax.to(l,T,{y:-t[V],ease:f,onComplete:function(){q=false}});TweenMax.to(P[V],c,{scale:0.9,transformOrigin:"50% 50%",marginLeft:L?-m:0,ease:f,onComplete:L?o?function(){q=false;if(a.isFunction(n[o])){n[o]()}}:function(){q=false}:function(){TweenMax.to(P[V],c,{scale:1,transformOrigin:"50% 50%",marginLeft:0,ease:f,onComplete:o?function(){q=false;n[o]()}:function(){q=false}})}});if(i&&L){if(D!=V&&D!==-1){var U=S[D];if(U){n[U]()}}D=V}else{if(D!=V){TweenMax.to(P[D],c,{scale:0.9,transformOrigin:"50% 50%",ease:f,onComplete:function(){TweenMax.to(P[D],c,{scale:1,transformOrigin:"50% 50%",ease:f,onComplete:function(){if(D!==-1){var W=S[D];if(W){n[W]()}}D=V}})}})}}},ScrollDown:function(){if(!g){return false}if(!q){q=true;s++;if(s<=b){G.PerformScroll()}else{s=b;q=false}}},ScrollUp:function(){if(!g){return false}if(!q){q=true;s--;if(s>=1){G.PerformScroll()}else{s=1;q=false}}},ScrollTo:function(i){if(!g){return false}if(i>=1&&i<=b){s=i;G.PerformScroll(true)}},ReSize:function(o){o=o||false;O=n.innerWidth;E=n.innerHeight;A=E/2;a("body").css({perspective:O});if(p!==undefined){p.css({top:A-J})}if(!o){var i=0,U;for(;i<b;i++){U=P[i];if(j){U.css({width:O,height:E})}t[i]=U.position().top}}},CreateSideMenu:function(){p=a('<div class="'+H+'"></div>').appendTo(K).css({position:"fixed",display:"block",left:-v-10,zIndex:99});var i=0;for(;i<b;i++){N[i]=a("<div></div>").addClass(u).attr({section:i+1}).appendTo(p).css({width:v,height:"auto",padding:5,cursor:"pointer","user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-o-user-select":"none","-ms-user-select":"none"}).on("mouseover",function(){var o=a(this);TweenMax.to(o,c,{opacity:1,ease:f});TweenMax.to(o.find("object"),c,{marginLeft:10,ease:f})}).on("click",function(){G.ScrollTo(parseInt(a(this).attr("section")))}).on("mouseout",function(){var o=a(this);TweenMax.to(o,c,{opacity:0.5,ease:f});TweenMax.to(o.find("object"),c,{marginLeft:0,ease:f})});B[i]=a("<object/>").attr({section:i,width:v,height:v,data:d[i],type:"image/svg+xml"}).on("load",function(){var U=parseInt(a(this).attr("section")),o=this.contentDocument;if(o!==null){B[U]=a(o.documentElement).attr("section",U+1).on("click",function(){G.ScrollTo(parseInt(a(this).attr("section")))});if(U===s-1){G.HighlightCurrentSideMenuIcon()}}J=p.height()/2}).appendTo(N[i])}G.HighlightCurrentSideMenuIcon().ReSize(true);return G},HighlightCurrentSideMenuIcon:function(){if(C){var i=s-1;TweenMax.to(B[i].find("#Base"),c,{stroke:"#00BEBE",fill:"#00BEBE",ease:Power4.easeOut});if(D!==i){TweenMax.to(B[D].find("#Base"),c,{stroke:"#ffffff",fill:"#ffffff",ease:Power4.easeOut})}}return G},OpenSideMenu:function(){if(!g){return G}if(!L){L=true;TweenMax.to(K,c,{width:v+m+10,opacity:1});if(k!==undefined){k()}TweenMax.killDelayedCallsTo(p);TweenMax.fromTo(p,c,{left:-v-10},{left:0,ease:f});var i=0;for(;i<b;i++){TweenMax.to(P[i],c,{scale:0.9,transformOrigin:"50% 50%",marginLeft:-m,ease:f});TweenMax.to(N[i],c,{marginLeft:10,opacity:0.5,ease:f,delay:i*0.1})}TweenMax.to(l,T,{rotationY:-20,transformOrigin:"50% 50%",ease:f})}return G},CloseSideMenu:function(){if(L){L=false;TweenMax.to(K,c,{width:h,opacity:0});TweenMax.fromTo(p,c,{left:0},{left:-v-10,ease:f,delay:T});var i=0;for(;i<b;i++){TweenMax.to(P[i],c,{scale:1,transformOrigin:"50% 50%",marginLeft:0,ease:f});TweenMax.to(N[i],c,{marginLeft:-10,opacity:0,ease:f,delay:i*0.1})}TweenMax.to(l,T,{rotationY:0,transformOrigin:"50% 50%",ease:f,onComplete:R})}return G},EnableScroll:function(){g=true;return G},DisableScroll:function(){g=false;return G},GetCurrent:function(){return s}};if(C){K=a('<div class="SideMenuWrapper"></div>').appendTo(l.parent()).css({position:"fixed",top:0,left:0,height:E,width:h,backgroundColor:"#000000",opacity:0});G.CreateSideMenu();K.on("mouseenter",G.OpenSideMenu);K.on("mouseleave",G.CloseSideMenu)}x.on("mousewheel",function(i,o){i.preventDefault();if(!L){if(o<0){G.ScrollDown()}else{if(o>0){G.ScrollUp()}}}});x.on("keydown",function(i){if(!L){if(i.keyCode===38){i.preventDefault();G.ScrollUp()}else{if(i.keyCode===40){i.preventDefault();G.ScrollDown()}}}});x.on("resize",function(i){G.ReSize()});return G}})(jQuery);